# Отправка фото в телеграмм
## Установка и обновление pip
Для начала, необходимо проверить установлен ли pip.
В командной строке, вбейте команду
```
pip --version
```
Должна вывестись версия pip, если нет, то его необходимо установить с помощью curl или wget
```
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
```
или
```
wget https://bootstrap.pypa.io/get-pip.py
```
После загрузки скрипта запустите его с помощью пайтон
```
python get-pip.py
```
Если pip уже установлен и вы хотите его обновить до последней версии, выполните следующую команду:
```
python -m pip install --upgrade pip
```
## Загрузка скрипта
- Скачайте скрипт
Вы можете скачать репозиторий по ссылке на GitHub: [ссылка на скрипт](https://github.com/Andrey9045/lesson16_space)

## Создание виртуального окружения
Откройте командную строку и перейдите в скачанный вами репозиторий
Перейти в директорию можно следующей командой:
```
cd C:\ваш\путь
```
Вместо C:\ваш\путь укажите фактический путь.
Далее для создания виртуального окружения введите следующую команду
```
python -m venv myvenv
```
Для активации ВО введите следующую команду
```
myvenv\Scripts\activate
```
## Подготовка к запуску скрипта - установка необходимых модулей
Далее введите следующую команду для установки необходимых модулей
```
pip install -r requirements.txt
```
## Переменные окружения
Создайте файл .env, расширение all
Содержимое файла:
```
TG_BOT_TOKEN=*****
TG_CHANNEL_ID=*****
NASA_API=*****
```
Заполните необходимую информацию
`TG_BOT_TOKEN`- мы получаем создавая своего бота в телеграмме. Бот создается при помощи `@BotFather`. Просто перейдите на бота и следуйте инструкциям.
`TG_CHANNEL_ID`- числовой ID вашего телеграм канала. Чтобы получить, создайте свой телеграм канал. Сделайте вашего бота администратором канала. После чего напишите любое сообщение в ваш канал.
Далее откройте новую вкладку в браузере и вбейте ссылку 
```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
```
Где `<YOUR_BOT_TOKEN>` - токен вашего телеграм бота.  В ответе вы найдете информацию о вашем канале, включая его ID.
`NASA_API` - Мы можем получить зарегестрировавшись на [сайте](https://api.nasa.gov/). Ваш API придёт на почтую 

## И так мы готовы к запуску скриптов.
В репозитории содержиться 4 скрипта. Разберем как пользоваться каждым из них

## Загрузка фото со SpaceX
Для запуска скрипта, в командной строке перейдите в директорию со скриптом
```
cd C:\lesson16_space
```
Где `C:\lesson16_space` - замените на ваш фактический путь до скрипта.

Далее просто запустите скрипт командой

```
python fetch_spacex_images.py --launch_id 5eb87d47ffd86e000604b38a
```
Где `--launch_id 5eb87d47ffd86e000604b38a` - аргумент с ID запуска, если ID не указан, скрипт задействует последний.

В корне проводника создасться папка spacex_images. В неё загрузятся фото запуска.

## Загрузка фото NASA APOD
Для запуска скрипта, в командной строке перейдите в директорию со скриптом
```
cd C:\lesson16_space
```
Где `C:\lesson16_space` - замените на ваш фактический путь до скрипта.

Далее просто запустите скрипт командой

```
python fetch_apod_images.py --count 9
```
Где `--count 9` - аргумент с кол-вом фото, которое скачает скрипт. Дефолтное значение 30.

В корне проводника создасться папка apod_images. В неё загрузятся фото APOD.

## Загрузка фото NASA EPIC

Для запуска скрипта, в командной строке перейдите в директорию со скриптом
```
cd C:\lesson16_space
```
Где `C:\lesson16_space` - замените на ваш фактический путь до скрипта.

Далее просто запустите скрипт командой

```
python fetch_epic_images.py --num_photos 9
```
Где `--num_photos 9` - аргумент с кол-вом дней за которые нам прийдут фото. Заканчивая сегодняшним, начиная кол-вом дней назад, которое вы указали в аргументе. Дефолтное значение 5

В корне проводника создасться папка epic_images. В неё загрузятся фото EPIC.

## Выгрузка фото в телеграм канал.

Для запуска скрипта, в командной строке перейдите в директорию со скриптом
```
cd C:\lesson16_space
```
Где `C:\lesson16_space` - замените на ваш фактический путь до скрипта.

Далее просто запустите скрипт командой

```
python uploading_photos_to_telegram.py C:\lesson16_space --delay 21000
```
Где `C:\lesson16_space\spacex_images` - аргумент с путем но до директории, где хранятся фото.
`--delay 21000` - Промежуток времени между публикациями фото. Задаётся в секундах (1 час = 3600 секунд). Дефолтное значение 14400(4 часа)

Скрипт будет выкладывать фото по указнному вами пути. Если в пути вы указали только директорию, то фото будут выкладываться из этой директории с указанным промежутком времени в аргументе.